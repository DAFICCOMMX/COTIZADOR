<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cotizador DAFIC | Servicios Integrales</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;800&display=swap" rel="stylesheet">

<style>
Â  /* --- ESTILOS GENERALES --- */
Â  :root {
Â  Â  --bg-color: #e6e6e6;
Â  Â  --text-main: #333;
Â  Â  --text-light: #777;
Â  Â  --shadow-light: rgba(255, 255, 255, 0.8);
Â  Â  --shadow-dark: rgba(163, 177, 198, 0.6);
Â  Â  --accent-color: #222;
Â  Â  --promo-color: #d32f2f;
Â  Â  --new-color: #2E7D32;
Â  Â  /* CAMBIO AQUÃ: Color rojo para el texto de descuento */
Â  Â  --discount-text: #FF0000;Â 
Â  }

Â  body {
Â  Â  background-color: var(--bg-color);
Â  Â  margin: 0;
Â  Â  font-family: 'Montserrat', sans-serif;
Â  Â  color: var(--text-main);
Â  Â  -webkit-font-smoothing: antialiased;
Â  Â  overflow-x: hidden;
Â  }

Â  .dafic-pricing-container {
Â  Â  max-width: 1100px;
Â  Â  margin: 0 auto;
Â  Â  text-align: center;
Â  Â  padding: 80px 20px;
Â  Â  min-height: 100vh;
Â  }

Â  /* LOGO */
Â  .dafic-logo-wrapper { margin-bottom: 60px; animation: fadeInDown 1s ease-out; }
Â  .dafic-logo-img {
Â  Â  max-width: 250px; height: auto; display: block; margin: 0 auto;
Â  Â  filter: drop-shadow(8px 8px 15px var(--shadow-dark));
Â  Â  transition: transform 0.3s ease;
Â  }
Â  .dafic-logo-img:hover { transform: scale(1.02); }

Â  /* NAVEGACIÃ“N */
Â  .dafic-toggle-wrapper {
Â  Â  display: inline-flex; background-color: var(--bg-color); border-radius: 50px;
Â  Â  padding: 8px; margin-bottom: 60px; gap: 20px;
Â  Â  box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light);
Â  }
Â  .dafic-toggle-btn {
Â  Â  padding: 15px 40px; background: transparent; border: none; cursor: pointer;
Â  Â  font-family: 'Montserrat', sans-serif; font-size: 13px; font-weight: 700; letter-spacing: 1px;
Â  Â  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); outline: none; color: var(--text-light);
Â  Â  border-radius: 40px; text-transform: uppercase;
Â  }
Â  .dafic-toggle-btn.active {
Â  Â  color: var(--accent-color); background-color: var(--bg-color);
Â  Â  box-shadow: 6px 6px 12px var(--shadow-dark), -6px -6px 12px var(--shadow-light);
Â  Â  transform: scale(1.03);
Â  }

Â  .selection-instruction {
Â  Â  font-size: 15px; color: #888; margin-top: 50px; font-weight: 500; letter-spacing: 0.5px; animation: fadeIn 2s;
Â  }

Â  /* SEPARADOR */
Â  .neumorphic-divider {
Â  Â  height: 2px; margin: 60px auto; max-width: 80%; background: var(--bg-color);
Â  Â  box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light);
Â  Â  border-radius: 10px; opacity: 0.5;
Â  }

Â  /* GRID TARJETAS */
Â  .dafic-cards-grid { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; margin-bottom: 60px; }
Â Â 
Â  .dafic-card {
Â  Â  background-color: var(--bg-color); border-radius: 25px; padding: 50px 25px 35px 25px; width: 260px;
Â  Â  text-align: left; cursor: pointer; position: relative; user-select: none;
Â  Â  border: 1px solid rgba(255,255,255,0.3);
Â  Â  box-shadow: 10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light);
Â  Â  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  opacity: 0; animation: fadeInUp 0.6s forwards; overflow: hidden;
Â  }
Â Â 
Â  /* SHEEN */
Â  .dafic-card::before {
Â  Â  content: ''; position: absolute; top: 0; left: -150%; width: 100%; height: 100%;
Â  Â  background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
Â  Â  transform: skewX(-25deg); transition: all 0.7s ease; display: block; z-index: 1; pointer-events: none;
Â  }
Â  .dafic-card:hover::before { left: 150%; }

Â  .dafic-card:hover { transform: translateY(-8px); box-shadow: 18px 18px 30px var(--shadow-dark), -18px -18px 30px var(--shadow-light); }
Â  .dafic-card.selected { box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light); border-color: transparent; transform: scale(0.98); }
Â Â 
Â  /* BADGES */
Â  .popular-badge {
Â  Â  position: absolute; top: 0; left: 50%; transform: translateX(-50%);
Â  Â  background: var(--accent-color); color: var(--bg-color);
Â  Â  font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
Â  Â  padding: 6px 15px; border-radius: 0 0 15px 15px; box-shadow: 4px 4px 8px var(--shadow-dark); z-index: 3;
Â  }
Â  .promo-badge {
Â  Â  position: absolute; top: 0; left: 50%; transform: translateX(-50%);
Â  Â  background: var(--promo-color); color: #fff;
Â  Â  font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
Â  Â  padding: 6px 15px; border-radius: 0 0 15px 15px; box-shadow: 4px 4px 8px var(--shadow-dark); z-index: 3;
Â  Â  width: auto; text-align: center; white-space: nowrap;
Â  }
Â  .new-badge {
Â  Â  position: absolute; top: 0; left: 50%; transform: translateX(-50%);
Â  Â  background: var(--new-color); color: #fff;
Â  Â  font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
Â  Â  padding: 6px 15px; border-radius: 0 0 15px 15px; box-shadow: 4px 4px 8px var(--shadow-dark); z-index: 3;
Â  }

Â  .card-check-icon {
Â  Â  position: absolute; top: 35px; right: 25px; width: 24px; height: 24px;
Â  Â  border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s;
Â  Â  background: var(--bg-color); z-index: 2;
Â  Â  box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
Â  }
Â  .dafic-card.selected .card-check-icon {
Â  Â  background: var(--bg-color); color: var(--accent-color);
Â  Â  box-shadow: inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light);
Â  }
Â  .dafic-card.selected .card-check-icon::after { content: "âœ“"; font-size: 14px; font-weight: 800; }

Â  .card-title { font-size: 13px; font-weight: 700; margin: 15px 0 10px 0; text-transform: uppercase; letter-spacing: 1px; color: #888; position: relative; z-index: 2;}
Â  .card-price-range { font-size: 22px; font-weight: 800; color: #222; display: block; margin-bottom: 15px; letter-spacing: -0.5px; position: relative; z-index: 2; text-shadow: 1px 1px 1px var(--shadow-light);}
Â  .card-desc { font-size: 12px; color: #555; line-height: 1.5; position: relative; z-index: 2; font-weight: 500;}

Â  /* CALCULADORA */
Â  .calculator-section {
Â  Â  background-color: var(--bg-color); border-radius: 40px; padding: 50px; max-width: 850px;
Â  Â  margin: 0 auto; text-align: left; display: none;
Â  Â  box-shadow: 20px 20px 60px var(--shadow-dark), -20px -20px 60px var(--shadow-light);
Â  Â  animation: slideUpFade 0.6s cubic-bezier(0.4, 0, 0.2, 1);
Â  }
Â  .calc-header { margin-bottom: 35px; font-size: 22px; font-weight: 300; color: #333; border-bottom: 1px solid #d1d1d1; padding-bottom: 20px; }
Â  .calc-header strong { font-weight: 800; }

Â  .calc-option-card {
Â  Â  display: flex; justify-content: space-between; align-items: center;
Â  Â  margin-bottom: 25px; padding: 25px 30px; border-radius: 20px;
Â  Â  background-color: var(--bg-color); cursor: pointer; transition: all 0.3s ease;
Â  Â  border: 1px solid rgba(255,255,255,0.4);
Â  Â  box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
Â  }
Â  .calc-option-card:hover { transform: translateY(-3px); box-shadow: 12px 12px 24px var(--shadow-dark), -12px -12px 24px var(--shadow-light); }
Â  .calc-option-card.active {
Â  Â  box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light);
Â  Â  border-color: transparent; transform: translateY(1px);
Â  }

Â  /* Indicador del check */
Â  .option-indicator {
Â  Â  width: 26px; height: 26px; border-radius: 50%; background: var(--bg-color);
Â  Â  box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
Â  Â  display: flex; align-items: center; justify-content: center; margin-right: 25px; transition: all 0.3s; color: transparent;
Â  }
Â  .calc-option-card.active .option-indicator {
Â  Â  background: var(--bg-color); color: var(--accent-color);
Â  Â  box-shadow: inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light);
Â  }
Â  .calc-option-card.active .option-indicator::after { content: "âœ“"; font-size: 14px; font-weight: 800; }
Â Â 
Â  .option-title { display: block; font-size: 16px; font-weight: 700; color: #333; margin-bottom: 5px; }
Â  .option-subtitle { font-size: 13px; color: #777; font-weight: 500; }
Â  .option-price { font-size: 20px; font-weight: 700; color: #333; }

Â  /* CONTROLES NUMÃ‰RICOS (General) */
Â  .qty-control {
Â  Â  display: flex; align-items: center; background: var(--bg-color); border-radius: 30px;
Â  Â  padding: 5px; margin-left: 20px; visibility: hidden; opacity: 0; transition: all 0.3s;
Â  Â  box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
Â  }
Â  .qty-control.visible { visibility: visible; opacity: 1; }
Â  .qty-btn {
Â  Â  background: var(--bg-color); border: none; width: 35px; height: 35px; border-radius: 50%;
Â  Â  font-size: 18px; cursor: pointer; color: #333;
Â  Â  box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light);
Â  Â  transition: all 0.2s; display: flex; align-items: center; justify-content: center;
Â  }
Â  .qty-btn:active { box-shadow: inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light); transform: scale(0.95); }
Â Â 
Â  /* Inputs de nÃºmero (empleados y meses) */
Â  .num-input { width: 45px; text-align: center; border: none; font-size: 18px; font-weight: 700; background: transparent; color: #333; font-family: 'Montserrat', sans-serif;}

Â  .total-display {
Â  Â  font-size: 52px; font-weight: 800; text-align: right; margin-top: 40px; color: #222; letter-spacing: -2px;
Â  Â  text-shadow: 2px 2px 2px var(--shadow-light);
Â  }
Â  .total-label { font-size: 12px; font-weight: 700; color: #999; text-transform: uppercase; letter-spacing: 3px;}
Â  .subtotal-note { text-align: right; font-size: 12px; color: #999; margin-bottom: 40px; font-style: italic; font-weight: 500;}
Â Â 
Â  /* CAMBIO: Color rojo para la alerta de descuento */
Â  .discount-alert { color: var(--discount-text); font-weight: 800; font-size: 15px; margin-top: 8px; display: block; text-transform: uppercase; letter-spacing: 0.5px;}

Â  /* FORMULARIO Y CALENDARIO */
Â  .form-section { margin-top: 40px; padding-top: 40px; border-top: 1px solid #d1d1d1; }
Â  .form-title { font-size: 18px; font-weight: 800; margin-bottom: 20px; text-transform: uppercase; color: #444; letter-spacing: 1px;}
Â  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 25px; }
Â  .form-input, .form-select {
Â  Â  width: 100%; padding: 15px 20px; border-radius: 15px; border: none; background: var(--bg-color);
Â  Â  box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
Â  Â  color: #333; font-size: 14px; outline: none; box-sizing: border-box; font-family: 'Montserrat', sans-serif; font-weight: 500;
Â  Â  transition: box-shadow 0.3s;
Â  }
Â  .form-input:focus, .form-select:focus { box-shadow: inset 8px 8px 15px var(--shadow-dark), inset -8px -8px 15px var(--shadow-light); }

Â  .custom-calendar {
Â  Â  background: var(--bg-color); border-radius: 25px; padding: 25px;
Â  Â  box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
Â  Â  margin-bottom: 25px;
Â  }
Â  .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
Â  .month-label { font-weight: 800; text-transform: uppercase; color: #333; letter-spacing: 1px; }
Â  .cal-nav {
Â  Â  background: var(--bg-color); border: none; cursor: pointer; width: 35px; height: 35px;
Â  Â  border-radius: 50%; box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light);
Â  Â  font-weight: 700; color: #555; transition: transform 0.2s;
Â  }
Â  .cal-nav:hover { transform: scale(1.1); }
Â  .calendar-weekdays { display: grid; grid-template-columns: repeat(7, 1fr); margin-bottom: 15px; text-align: center; font-size: 12px; font-weight: 800; color: #999; }
Â  .calendar-days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; }
Â  .day-cell {
Â  Â  height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 12px;
Â  Â  cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s; color: #666;
Â  }
Â  .day-cell:hover:not(.disabled):not(.selected) { background: #e0e0e0; transform: translateY(-2px); }
Â  .day-cell.selected {
Â  Â  background: var(--bg-color); color: var(--accent-color); font-weight: 800;
Â  Â  box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
Â  }
Â  .day-cell.disabled { color: #ccc; cursor: not-allowed; font-weight: 400;}

Â  .time-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; margin-top: 20px; }
Â  .time-btn {
Â  Â  padding: 12px; border-radius: 15px; background: var(--bg-color); border: none; cursor: pointer;
Â  Â  font-size: 13px; font-weight: 600; color: #666; font-family: 'Montserrat', sans-serif;
Â  Â  box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
Â  Â  transition: all 0.2s;
Â  }
Â  .time-btn:hover { transform: translateY(-3px); color: var(--accent-color); }
Â  .time-btn.selected {
Â  Â  background: var(--bg-color); color: var(--accent-color);
Â  Â  box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
Â  Â  border: 1px solid transparent;
Â  }

Â  .action-buttons { display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 50px; }
Â  .btn-whatsapp-big {
Â  Â  padding: 22px 65px; text-decoration: none; font-weight: 800; text-transform: uppercase;
Â  Â  font-size: 15px; letter-spacing: 1.5px; cursor: pointer; border-radius: 60px;
Â  Â  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  display: inline-flex; align-items: center; gap: 15px;
Â  Â  background-color: var(--bg-color); color: #25D366;
Â  Â  box-shadow: 10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light);
Â  Â  border: 1px solid rgba(255,255,255,0.5);
Â  }
Â  .btn-whatsapp-big:hover { transform: translateY(-5px) scale(1.02); color: #1ebc57; }

Â  .hidden { display: none !important; }
Â  .dafic-card { opacity: 0; animation: fadeInUp 0.6s forwards; }
Â  .dafic-card:nth-child(1) { animation-delay: 0.1s; }Â 
Â  .dafic-card:nth-child(2) { animation-delay: 0.15s; }
Â  .dafic-card:nth-child(3) { animation-delay: 0.2s; }Â 
Â  .dafic-card:nth-child(4) { animation-delay: 0.25s; }
Â  .dafic-card:nth-child(5) { animation-delay: 0.3s; }
Â  .dafic-card:nth-child(6) { animation-delay: 0.35s; }
Â  .dafic-card:nth-child(7) { animation-delay: 0.4s; }
Â  .dafic-card:nth-child(8) { animation-delay: 0.45s; }
Â Â 
Â  @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
Â  @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
Â  @keyframes slideUpFade { from { opacity: 0; transform: translateY(60px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
Â  @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
</style>
</head>
<body>

<div class="dafic-pricing-container">
Â Â 
Â  <div class="dafic-logo-wrapper">
Â  Â  <img src="https://raw.githubusercontent.com/DAFICCOMMX/COTIZADOR/main/logo.png"Â 
Â  Â  Â  Â  Â alt="DAFIC" class="dafic-logo-img"
Â  Â  Â  Â  Â onerror="this.onerror=null; this.src='COTIZADOR/logo.png';">
Â  </div>
Â Â 
Â  <div class="dafic-toggle-wrapper">
Â  Â  <button class="dafic-toggle-btn" onclick="cambiarTipo('fisica', this)">Persona FÃ­sica</button>
Â  Â  <button class="dafic-toggle-btn" onclick="cambiarTipo('moral', this)">Persona Moral</button>
Â  </div>

Â  <div id="mensaje-inicial" class="selection-instruction">Seleccione su perfil para comenzar</div>

Â  <div id="grid-fisica" class="dafic-cards-grid hidden">
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 600, 'RESICO', 1000, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">RÃ©gimen Simplificado</div>
Â  Â  Â  <span class="card-price-range">$600 - $2,000</span>
Â  Â  Â  <p class="card-desc">Ideal para emprendedores y ventas al pÃºblico.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 1200, 'Act. Empresarial', 1000, '')">
Â  Â  Â  <div class="popular-badge">MÃ¡s Popular</div>
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Actividad Empresarial</div>
Â  Â  Â  <span class="card-price-range">$1,200 - $6,000</span>
Â  Â  Â  <p class="card-desc">Profesionales independientes y negocios.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 1000, 'Plataformas', 1000, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Plataformas Digitales</div>
Â  Â  Â  <span class="card-price-range">$1,000 - $7,000</span>
Â  Â  Â  <p class="card-desc">Uber, Airbnb, Amazon, Mercado Libre.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 1000, 'Arrendamiento', 1000, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Arrendamiento</div>
Â  Â  Â  <span class="card-price-range">$1,000 - $9,000</span>
Â  Â  Â  <p class="card-desc">GestiÃ³n fiscal para renta de inmuebles.</p>
Â  Â  </div>
Â  Â Â 
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 1000, 'DeclaraciÃ³n Anual PF', 0, '')">
Â  Â  Â  <div class="promo-badge">Oferta hasta 28 Feb</div>
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">DeclaraciÃ³n Anual</div>
Â  Â  Â  <span class="card-price-range">$1,000 <small style="font-size:12px; color:#777; font-weight:400;">(Reg. $1,500)</small></span>
Â  Â  Â  <p class="card-desc">Sueldos y Salarios. <strong>Incluye GeneraciÃ³n de ContraseÃ±a GRATIS.</strong></p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 1500, 'DevoluciÃ³n Impuestos PF', 0, ' + 15% de la devoluciÃ³n')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">DevoluciÃ³n Impuestos</div>
Â  Â  Â  <span class="card-price-range">$1,500 <small style="font-size:14px;">+ 15%</small></span>
Â  Â  Â  <p class="card-desc">GestiÃ³n integral para la recuperaciÃ³n de tu saldo a favor.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 2000, 'RegularizaciÃ³n Fiscal PF', 0, '')">
Â  Â  Â  <div class="new-badge">Recomendado</div>
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">RegularizaciÃ³n</div>
Â  Â  Â  <span class="card-price-range">Desde $2,000</span>
Â  Â  Â  <p class="card-desc">Ponte al corriente con declaraciones de aÃ±os anteriores.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 800, 'RenovaciÃ³n e.Firma', 0, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">RenovaciÃ³n e.Firma</div>
Â  Â  Â  <span class="card-price-range">$800</span>
Â  Â  Â  <p class="card-desc">TrÃ¡mite en lÃ­nea para renovar tu firma electrÃ³nica vencida.</p>
Â  Â  </div>
Â  Â Â 
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 500, 'Cita SAT', 0, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Citas SAT</div>
Â  Â  Â  <span class="card-price-range">$500</span>
Â  Â  Â  <p class="card-desc">Agendamos tu cita para firma electrÃ³nica o trÃ¡mites.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 500, 'TrÃ¡mite IMSS', 0, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">TrÃ¡mite IMSS</div>
Â  Â  Â  <span class="card-price-range">$500</span>
Â  Â  Â  <p class="card-desc">Altas, bajas y gestiÃ³n de seguridad social.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 200, 'GeneraciÃ³n ContraseÃ±a', 0, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Generar ContraseÃ±a</div>
Â  Â  Â  <span class="card-price-range">$200</span>
Â  Â  Â  <p class="card-desc">Acceso al portal del SAT. (Gratis si contratas anual).</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 800, 'AsesorÃ­a 1:1', 0, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">AsesorÃ­a 1 a 1</div>
Â  Â  Â  <span class="card-price-range">$800 <small style="font-size:12px;">/ hora</small></span>
Â  Â  Â  <p class="card-desc">SesiÃ³n por Zoom para resolver dudas especÃ­ficas.</p>
Â  Â  </div>
Â  </div>

Â  <div id="grid-moral" class="dafic-cards-grid hidden">
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 3000, 'Contabilidad Persona Moral', 2000, '')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Contabilidad</div>
Â  Â  Â  <span class="card-price-range">$3,000 - $30,000</span>
Â  Â  Â  <p class="card-desc">Cumplimiento total para Sociedades.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 7000, 'Estrategia Fiscal', 2000, '')">
Â  Â  Â  <div class="popular-badge">Recomendado</div>
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">Estrategia Fiscal</div>
Â  Â  Â  <span class="card-price-range">$7,000 - $35,000</span>
Â  Â  Â  <p class="card-desc">ReingenierÃ­a fiscal y optimizaciÃ³n (Solo AsesorÃ­a).</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 3500, 'DevoluciÃ³n Impuestos PM', 0, ' + 20% de la devoluciÃ³n')">
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">DevoluciÃ³n Impuestos</div>
Â  Â  Â  <span class="card-price-range">$3,500 <small style="font-size:14px;">+ 20%</small></span>
Â  Â  Â  <p class="card-desc">RecuperaciÃ³n de saldos para Personas Morales.</p>
Â  Â  </div>
Â  Â  <div class="dafic-card" onclick="seleccionarPlan(this, 4000, 'RegularizaciÃ³n Fiscal PM', 0, '')">
Â  Â  Â  <div class="new-badge">Importante</div>
Â  Â  Â  <div class="card-check-icon"></div>
Â  Â  Â  <div class="card-title">RegularizaciÃ³n</div>
Â  Â  Â  <span class="card-price-range">Desde $4,000</span>
Â  Â  Â  <p class="card-desc">Ponte al corriente y evita multas o cancelaciones.</p>
Â  Â  </div>
Â  </div>

Â  <div class="neumorphic-divider"></div>

Â  <div id="zona-calculadora" class="calculator-section">
Â  Â  <div class="calc-header">Resumen: <strong><span id="nombre-plan-display">---</span></strong></div>

Â  Â  <div class="calc-option-card active" id="card-regularizacion" style="display:none;" onclick="event.stopPropagation()">
Â  Â  Â  <div style="display:flex; align-items:center;">
Â  Â  Â  Â  <div class="option-indicator" style="background:var(--accent-color); color:white;">âœ“</div>
Â  Â  Â  Â  <div class="option-content">
Â  Â  Â  Â  Â  <span class="option-title">Periodo a Regularizar</span>
Â  Â  Â  Â  Â  <span class="option-subtitle">Entre mÃ¡s meses, mayor descuento.</span>
Â  Â  Â  Â  Â  <span id="txt-descuento" class="discount-alert"></span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div id="wrapper-meses" class="qty-control visible">
Â  Â  Â  Â  <button class="qty-btn" onclick="cambiarMeses(-1)">-</button>
Â  Â  Â  Â  <input type="number" id="numMesesReg" class="num-input" value="1" readonly>
Â  Â  Â  Â  <button class="qty-btn" onclick="cambiarMeses(1)">+</button>
Â  Â  Â  </div>
Â  Â  Â  <div class="option-price" style="min-width: 80px; text-align: right;">meses</div>
Â  Â  </div>

Â  Â  <div class="calc-option-card active" id="card-diagnostico" onclick="toggleOption('checkDiagnostico', 'card-diagnostico')">
Â  Â  Â  <div style="display:flex; align-items:center;"><div class="option-indicator"></div><div class="option-content"><span class="option-title">DiagnÃ³stico Inicial</span><span class="option-subtitle">Pago Ãºnico (Bonificable 100%)</span></div></div>
Â  Â  Â  <div class="option-price">+ $<span id="costo-diagnostico">0</span></div>
Â  Â  Â  <input type="checkbox" id="checkDiagnostico" style="display:none;" checked>
Â  Â  </div>

Â  Â  <div class="calc-option-card" id="card-nomina" onclick="toggleOption('checkNomina', 'card-nomina')">
Â  Â  Â  <div style="display:flex; align-items:center;"><div class="option-indicator"></div><div class="option-content"><span class="option-title">NÃ³mina / Empleados</span><span class="option-subtitle">Â¿Tienes personal? ($30 c/u)</span></div></div>
Â  Â  Â  <div id="wrapper-contador" class="qty-control" onclick="event.stopPropagation()"><button class="qty-btn" onclick="cambiarEmpleados(-1)">-</button><input type="number" id="numEmpleados" class="num-input" value="1" readonly><button class="qty-btn" onclick="cambiarEmpleados(1)">+</button></div>
Â  Â  Â  <div class="option-price">+ $<span id="costo-nomina">0</span></div>
Â  Â  Â  <input type="checkbox" id="checkNomina" style="display:none;">
Â  Â  </div>

Â  Â  <div class="total-display"><span class="total-label" id="label-total">InversiÃ³n Estimada</span><br><span id="total-final">$0</span> MXN</div>
Â  Â  <div id="nota-diagnostico" class="subtotal-note" style="display:none;">* Este monto cubre Ãºnicamente el DiagnÃ³stico.</div>

Â  Â  <div class="form-section">
Â  Â  Â  <div class="form-title">InformaciÃ³n para tu Cita</div>
Â  Â  Â  <div class="form-grid">
Â  Â  Â  Â  <input type="text" id="clientName" class="form-input" placeholder="Nombre Completo" oninput="actualizarLinks()">
Â  Â  Â  Â  <input type="text" id="clientGiro" class="form-input" placeholder="Giro del Negocio" oninput="actualizarLinks()">
Â  Â  Â  Â  <select id="clientStatus" class="form-select" onchange="verificarStatus()">
Â  Â  Â  Â  Â  <option value="" disabled selected>Â¿EstÃ¡s dado de alta en el SAT?</option>
Â  Â  Â  Â  Â  <option value="No">No, aÃºn no</option>
Â  Â  Â  Â  Â  <option value="Si">SÃ­, ya estoy dado de alta</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <div id="divAtraso" style="display:none;">
Â  Â  Â  Â  Â  <select id="clientAtraso" class="form-select" onchange="actualizarLinks()">
Â  Â  Â  Â  Â  Â  <option value="" disabled selected>Â¿Tienes meses de atraso?</option>
Â  Â  Â  Â  Â  Â  <option value="Sin Atraso">No, voy al corriente</option>
Â  Â  Â  Â  Â  Â  <option value="Con Atraso">SÃ­, tengo declaraciones pendientes</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="form-section">
Â  Â  Â  <div class="form-title">Agenda tu Cita (Lun-Sab | 6:30PM - 11:30PM)</div>
Â  Â  Â  <div class="custom-calendar">
Â  Â  Â  Â  <div class="calendar-header"><button class="cal-nav" onclick="prevMonth()"><</button><span class="month-label" id="calendar-month-year"></span><button class="cal-nav" onclick="nextMonth()">></button></div>
Â  Â  Â  Â  <div class="calendar-weekdays"><div>Do</div><div>Lu</div><div>Ma</div><div>Mi</div><div>Ju</div><div>Vi</div><div>Sa</div></div>
Â  Â  Â  Â  <div class="calendar-days" id="calendar-days"></div>
Â  Â  Â  </div>
Â  Â  Â  <label style="font-size:12px; font-weight:bold; color:#777; display:block; text-transform:uppercase; letter-spacing:1px;">Hora Seleccionada: <span id="txt-hora-sel" style="color:#000;">--</span></label>
Â  Â  Â  <div class="time-grid" id="timeGrid">
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('18:30', this)">06:30 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('19:00', this)">07:00 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('19:30', this)">07:30 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('20:00', this)">08:00 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('20:30', this)">08:30 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('21:00', this)">09:00 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('21:30', this)">09:30 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('22:00', this)">10:00 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('22:30', this)">10:30 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('23:00', this)">11:00 PM</button>
Â  Â  Â  Â  <button class="time-btn" onclick="seleccionarHora('23:30', this)">11:30 PM</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="action-buttons">
Â  Â  Â  <a href="#" id="btn-whatsapp-link" target="_blank" class="btn-whatsapp-big">
Â  Â  Â  Â  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.711 2.592 2.664-.698c.969.591 1.746.864 2.792.864 3.19 0 5.775-2.586 5.775-5.766.001-3.18-2.587-5.767-5.771-5.767zm12 5.766c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-4.586 3.193c-.237-.118-1.402-.693-1.619-.772-.217-.079-.375-.118-.533.118-.158.237-.612.772-.75.93-.138.157-.276.177-.513.059-.237-.118-1.002-.37-1.908-1.177-.704-.627-1.18-1.401-1.318-1.637-.138-.237-.007-.365.112-.483.107-.107.237-.276.355-.414.118-.138.158-.237.237-.394.079-.158.04-.296-.02-.414-.059-.118-.533-1.286-.73-1.761-.192-.464-.386-.401-.533-.408-.138-.007-.296-.007-.454-.007-.158 0-.414.059-.632.296-.217.237-.829.809-.829 1.974 0 1.165.849 2.29 .967 2.448.118.157 1.671 2.551 4.049 3.577.566.244 1.008.391 1.353.501.572.181 1.093.155 1.505.094.461-.068 1.402-.573 1.6-1.127.198-.553.198-1.028.139-1.127-.059-.099-.217-.158-.454-.277z"/></svg>
Â  Â  Â  Â  Confirmar Cita por WhatsApp
Â  Â  Â  </a>
Â  Â  </div>
Â  </div>
</div>

<script>
Â  let precioPlanBase = 0; let nombrePlan = ""; let baseDiagnostico = 0;
Â  let horaSeleccionada = ""; let fechaSeleccionada = "";
Â  let textoExtraPrecio = "";Â 

Â  const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
Â  let currentDate = new Date();
Â  let currMonth = currentDate.getMonth();
Â  let currYear = currentDate.getFullYear();

Â  function renderCalendar() {
Â  Â  const firstDay = new Date(currYear, currMonth, 1).getDay();Â 
Â  Â  const daysInMonth = new Date(currYear, currMonth + 1, 0).getDate();
Â  Â  const calendarDays = document.getElementById('calendar-days');
Â  Â  document.getElementById('calendar-month-year').innerText = `${monthNames[currMonth]} ${currYear}`;
Â  Â  calendarDays.innerHTML = "";
Â  Â  for (let i = 0; i < firstDay; i++) { calendarDays.appendChild(document.createElement('div')); }
Â  Â  for (let i = 1; i <= daysInMonth; i++) {
Â  Â  Â  Â  let dayDiv = document.createElement('div');
Â  Â  Â  Â  dayDiv.innerText = i; dayDiv.classList.add('day-cell');
Â  Â  Â  Â  let checkDate = new Date(currYear, currMonth, i);
Â  Â  Â  Â  if (checkDate.getDay() === 0) dayDiv.classList.add('disabled');
Â  Â  Â  Â  else dayDiv.onclick = function() { seleccionarFecha(i, this); };
Â  Â  Â  Â  calendarDays.appendChild(dayDiv);
Â  Â  }
Â  }
Â  function prevMonth() { currMonth--; if(currMonth < 0) { currMonth = 11; currYear--; } renderCalendar(); }
Â  function nextMonth() { currMonth++; if(currMonth > 11) { currMonth = 0; currYear++; } renderCalendar(); }
Â  function seleccionarFecha(dia, elemento) {
Â  Â  document.querySelectorAll('.day-cell').forEach(d => d.classList.remove('selected'));
Â  Â  elemento.classList.add('selected');
Â  Â  fechaSeleccionada = `${dia} de ${monthNames[currMonth]} ${currYear}`;
Â  Â  actualizarLinks();
Â  }
Â  renderCalendar();

Â  function cambiarTipo(tipo, btn) {
Â  Â  document.getElementById('mensaje-inicial').style.display = 'none';
Â  Â  document.getElementById('zona-calculadora').style.display = 'none';
Â  Â  resetearSeleccion();
Â  Â  document.getElementById('grid-fisica').classList.add('hidden');
Â  Â  document.getElementById('grid-moral').classList.add('hidden');
Â  Â  if (tipo === 'fisica') document.getElementById('grid-fisica').classList.remove('hidden');
Â  Â  else document.getElementById('grid-moral').classList.remove('hidden');
Â  Â  document.querySelectorAll('.dafic-toggle-btn').forEach(b => b.classList.remove('active'));
Â  Â  btn.classList.add('active');
Â  Â  document.querySelector('.neumorphic-divider').style.display = 'none';
Â  }

Â  function seleccionarPlan(ele, prec, nom, diag, txtExtra) {
Â  Â  document.querySelectorAll('.dafic-card').forEach(c => c.classList.remove('selected'));
Â  Â  ele.classList.add('selected');
Â  Â Â 
Â  Â  precioPlanBase = prec;Â 
Â  Â  nombrePlan = nom;Â 
Â  Â  baseDiagnostico = diag;
Â  Â  textoExtraPrecio = txtExtra;

Â  Â  let cardDiag = document.getElementById('card-diagnostico');
Â  Â  let cardNom = document.getElementById('card-nomina');
Â  Â  let cardReg = document.getElementById('card-regularizacion');
Â  Â  let checkDiag = document.getElementById('checkDiagnostico');
Â  Â  let checkNom = document.getElementById('checkNomina');

Â  Â  // Resetear estados
Â  Â  cardReg.style.display = 'none';
Â  Â  document.getElementById('numMesesReg').value = 1;Â 
Â  Â  document.getElementById('txt-descuento').innerText = "";

Â  Â  const serviciosUnicos = ['DeclaraciÃ³n Anual PF', 'DevoluciÃ³n Impuestos PF', 'Cita SAT', 'TrÃ¡mite IMSS', 'GeneraciÃ³n ContraseÃ±a', 'DevoluciÃ³n Impuestos PM', 'RenovaciÃ³n e.Firma', 'AsesorÃ­a 1:1', 'Estrategia Fiscal'];
Â  Â Â 
Â  Â  if (nom.includes('RegularizaciÃ³n')) {
Â  Â  Â  Â  // MODO REGULARIZACION: Mostrar selector de meses
Â  Â  Â  Â  cardDiag.style.display = 'none';
Â  Â  Â  Â  cardNom.style.display = 'none';
Â  Â  Â  Â  cardReg.style.display = 'flex';Â 
Â  Â  Â  Â  checkDiag.checked = false;
Â  Â  Â  Â  checkNom.checked = false;
Â  Â  } else if (serviciosUnicos.includes(nom)) {
Â  Â  Â  Â  // MODO PAGO ÃšNICO: Ocultar todo
Â  Â  Â  Â  cardDiag.style.display = 'none';
Â  Â  Â  Â  cardNom.style.display = 'none';
Â  Â  Â  Â  checkDiag.checked = false;
Â  Â  Â  Â  checkNom.checked = false;
Â  Â  Â  Â  cardDiag.classList.remove('active');
Â  Â  Â  Â  cardNom.classList.remove('active');
Â  Â  } else {
Â  Â  Â  Â  // MODO MENSUALIDAD (Normal): Mostrar nÃ³mina y diagnÃ³stico
Â  Â  Â  Â  cardDiag.style.display = 'flex';
Â  Â  Â  Â  cardNom.style.display = 'flex';
Â  Â  Â  Â  checkDiag.checked = true;
Â  Â  Â  Â  checkNom.checked = false;
Â  Â  Â  Â  cardDiag.classList.add('active');
Â  Â  Â  Â  cardNom.classList.remove('active');
Â  Â  }

Â  Â  updateNominaVisibility();
Â  Â  document.getElementById('zona-calculadora').style.display = 'block';
Â  Â  document.querySelector('.neumorphic-divider').style.display = 'block';Â 
Â  Â  setTimeout(() => { document.getElementById('zona-calculadora').scrollIntoView({behavior: "smooth", block: "center"}); }, 100);
Â  Â  calcularTotal();
Â  }

Â  function toggleOption(chkId, cardId) {
Â  Â  let chk = document.getElementById(chkId);
Â  Â  let card = document.getElementById(cardId);
Â  Â  chk.checked = !chk.checked;
Â  Â  if (chk.checked) card.classList.add('active'); else card.classList.remove('active');
Â  Â  if(chkId === 'checkNomina') updateNominaVisibility();
Â  Â  calcularTotal();
Â  }

Â  function updateNominaVisibility() {
Â  Â  let chk = document.getElementById('checkNomina');
Â  Â  let wrp = document.getElementById('wrapper-contador');
Â  Â  if (chk.checked) wrp.classList.add('visible'); else wrp.classList.remove('visible');
Â  }

Â  function cambiarEmpleados(delta) {
Â  Â  let input = document.getElementById('numEmpleados');
Â  Â  let val = parseInt(input.value) + delta;
Â  Â  if (val < 1) val = 1; input.value = val; calcularTotal();
Â  }

Â  // NUEVA FUNCIÃ“N PARA CAMBIAR MESES DE REGULARIZACIÃ“N
Â  function cambiarMeses(delta) {
Â  Â  let input = document.getElementById('numMesesReg');
Â  Â  let val = parseInt(input.value) + delta;
Â  Â  if (val < 1) val = 1; input.value = val;Â 
Â  Â  calcularTotal(); // Recalcular con el nuevo nÃºmero de meses
Â  }

Â  function resetearSeleccion() {Â 
Â  Â  precioPlanBase = 0; nombrePlan = ""; baseDiagnostico = 0; textoExtraPrecio = "";
Â  Â  document.querySelectorAll('.dafic-card').forEach(c => c.classList.remove('selected'));Â 
Â  Â  document.getElementById('card-diagnostico').style.display = 'flex';
Â  Â  document.getElementById('card-nomina').style.display = 'flex';
Â  Â  document.getElementById('card-regularizacion').style.display = 'none';
Â  }

Â  function verificarStatus() {
Â  Â  let st = document.getElementById('clientStatus').value;
Â  Â  let div = document.getElementById('divAtraso');
Â  Â  if (st === 'Si') div.style.display = 'block';
Â  Â  else { div.style.display = 'none'; document.getElementById('clientAtraso').value = ""; }
Â  Â  actualizarLinks();
Â  }

Â  function seleccionarHora(hora, btn) {
Â  Â  horaSeleccionada = hora;
Â  Â  document.getElementById('txt-hora-sel').innerText = formatTime(hora);
Â  Â  let btns = document.querySelectorAll('.time-btn');
Â  Â  btns.forEach(b => b.classList.remove('selected'));
Â  Â  btn.classList.add('selected');
Â  Â  actualizarLinks();
Â  }
Â Â 
Â  function formatTime(time24) {
Â  Â  let [h, m] = time24.split(':');
Â  Â  let ampm = h >= 12 ? 'PM' : 'AM';
Â  Â  h = h % 12; h = h ? h : 12;Â 
Â  Â  return `${h}:${m} ${ampm}`;
Â  }

Â  function calcularTotal() {
Â  Â  let totalDisplay = document.getElementById('total-final');
Â  Â  let labelDisplay = document.getElementById('label-total');
Â  Â  let notaDisplay = document.getElementById('nota-diagnostico');
Â  Â  let totalFinal = 0;

Â  Â  // --- LÃ“GICA ESPECIAL PARA REGULARIZACIÃ“N CON DESCUENTO ---
Â  Â  if (nombrePlan.includes('RegularizaciÃ³n')) {
Â  Â  Â  Â  let meses = parseInt(document.getElementById('numMesesReg').value);
Â  Â  Â  Â  let precioBaseMes = precioPlanBase; // El precio base de la tarjeta (2000 o 4000)
Â  Â  Â  Â  let subtotal = precioBaseMes * meses;
Â  Â  Â  Â  let descuento = 0;
Â  Â  Â  Â  let porcentaje = 0;

Â  Â  Â  Â  // Aplicar descuentos por volumen
Â  Â  Â  Â  if (meses >= 12) { porcentaje = 30; }
Â  Â  Â  Â  else if (meses >= 6) { porcentaje = 20; }
Â  Â  Â  Â  else if (meses >= 3) { porcentaje = 10; }

Â  Â  Â  Â  descuento = subtotal * (porcentaje / 100);
Â  Â  Â  Â  totalFinal = subtotal - descuento;

Â  Â  Â  Â  // Mostrar alerta de ahorro
Â  Â  Â  Â  if (porcentaje > 0) {
Â  Â  Â  Â  Â  Â  document.getElementById('txt-descuento').innerText = `Â¡${porcentaje}% OFF aplicado! Ahorras $${descuento.toLocaleString()}`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  document.getElementById('txt-descuento').innerText = "";
Â  Â  Â  Â  }

Â  Â  Â  Â  totalDisplay.innerText = "$" + totalFinal.toLocaleString();
Â  Â  Â  Â  labelDisplay.innerText = `Total por ${meses} meses (Pago Ãšnico):`;
Â  Â  Â  Â  notaDisplay.style.display = "none";

Â  Â  } else {
Â  Â  Â  Â  // --- LÃ“GICA NORMAL (Mensualidad / Pago Ãšnico) ---
Â  Â  Â  Â  let chkDiag = document.getElementById('checkDiagnostico');
Â  Â  Â  Â  let montoDiag = baseDiagnostico;
Â  Â  Â  Â  document.getElementById('costo-diagnostico').innerText = montoDiag.toLocaleString();

Â  Â  Â  Â  let chkNom = document.getElementById('checkNomina');
Â  Â  Â  Â  let num = parseInt(document.getElementById('numEmpleados').value);
Â  Â  Â  Â  let totalNom = chkNom.checked ? num * 30 : 0;
Â  Â  Â  Â  document.getElementById('costo-nomina').innerText = totalNom.toLocaleString();
Â  Â  Â  Â Â 
Â  Â  Â  Â  let mensualidadEstimada = precioPlanBase + totalNom;

Â  Â  Â  Â  if(chkDiag.checked) {
Â  Â  Â  Â  Â  Â  totalDisplay.innerText = "$" + montoDiag.toLocaleString();
Â  Â  Â  Â  Â  Â  labelDisplay.innerText = "Pago Inicial Requerido (DiagnÃ³stico):";
Â  Â  Â  Â  Â  Â  notaDisplay.style.display = "block";
Â  Â  Â  Â  Â  Â  notaDisplay.innerText = "* Cubriendo este monto iniciamos tu DiagnÃ³stico. La mensualidad de $" + mensualidadEstimada.toLocaleString() + " inicia despuÃ©s.";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  totalDisplay.innerText = "$" + mensualidadEstimada.toLocaleString() + textoExtraPrecio;
Â  Â  Â  Â  Â  Â  labelDisplay.innerText = (textoExtraPrecio !== "") ? "Costo Estimado:" : "InversiÃ³n Mensual Estimada:";
Â  Â  Â  Â  Â  Â  notaDisplay.style.display = "none";
Â  Â  Â  Â  }
Â  Â  }
Â  Â  document.getElementById('nombre-plan-display').innerText = nombrePlan;
Â  Â  actualizarLinks();
Â  }

Â  function actualizarLinks() {
Â  Â  let checkDiag = document.getElementById('checkDiagnostico').checked;
Â  Â  let costoDiag = document.getElementById('costo-diagnostico').innerText;
Â  Â  let chkNom = document.getElementById('checkNomina');
Â  Â  let num = parseInt(document.getElementById('numEmpleados').value);
Â  Â  let totalNom = chkNom.checked ? num * 30 : 0;
Â  Â Â 
Â  Â  // Calcular Total Real para el mensaje de WhatsApp
Â  Â  let totalMensaje = "";
Â  Â  if (nombrePlan.includes('RegularizaciÃ³n')) {
Â  Â  Â  Â  let meses = parseInt(document.getElementById('numMesesReg').value);
Â  Â  Â  Â  // Recalcular rÃ¡pido para el mensaje
Â  Â  Â  Â  let sub = precioPlanBase * meses;
Â  Â  Â  Â  let porc = (meses >= 12) ? 0.3 : (meses >= 6 ? 0.2 : (meses >= 3 ? 0.1 : 0));
Â  Â  Â  Â  let final = sub - (sub * porc);
Â  Â  Â  Â  totalMensaje = `$${final.toLocaleString()} (Total por ${meses} meses con descuento aplicado)`;
Â  Â  } else {
Â  Â  Â  Â  let mens = precioPlanBase + totalNom;
Â  Â  Â  Â  totalMensaje = `$${mens.toLocaleString()}${textoExtraPrecio}`;
Â  Â  }

Â  Â  let nombre = document.getElementById('clientName').value || "No especificado";
Â  Â  let giro = document.getElementById('clientGiro').value || "No especificado";
Â  Â  let status = document.getElementById('clientStatus').value || "No especificado";
Â  Â  let atraso = document.getElementById('clientAtraso').value;
Â  Â Â 
Â  Â  let infoFiscal = status === 'Si' ? `â€¢ Alta SAT: SÃ\nâ€¢ Estatus: ${atraso || "Sin especificar"}` : `â€¢ Alta SAT: ${status}`;
Â  Â  let fechaTxt = fechaSeleccionada || "Pendiente";
Â  Â  let horaTxt = horaSeleccionada ? formatTime(horaSeleccionada) : "Pendiente";

Â  Â  let telefono = "5213329780881";Â 
Â  Â  let textoEmpleados = (chkNom.checked && !nombrePlan.includes('RegularizaciÃ³n')) ? ` (+ NÃ³mina de ${num} empleados)` : "";
Â  Â  let textoDiag = checkDiag ? `\nâ€¢ PAGO INICIAL (DiagnÃ³stico): $${costoDiag}` : "";
Â  Â Â 
Â  Â  let mensaje = `Hola DAFIC, quiero agendar mi cita.\n\n` +
Â  Â  Â  Â  Â  Â  Â  Â  Â  `ğŸ“‹ *DATOS DEL CLIENTE*\nâ€¢ Nombre: ${nombre}\nâ€¢ Giro: ${giro}\n${infoFiscal}\n\n` +
Â  Â  Â  Â  Â  Â  Â  Â  Â  `ğŸ“Š *COTIZACIÃ“N*\nâ€¢ Plan: ${nombrePlan}\nâ€¢ Costo Total: ${totalMensaje}${textoEmpleados}` +
Â  Â  Â  Â  Â  Â  Â  Â  Â  `${textoDiag}\n\n` +
Â  Â  Â  Â  Â  Â  Â  Â  Â  `ğŸ“… *CITA SOLICITADA*\nâ€¢ Fecha: ${fechaTxt}\nâ€¢ Hora: ${horaTxt}`;

Â  Â  document.getElementById('btn-whatsapp-link').href = `https://wa.me/${telefono}?text=${encodeURIComponent(mensaje)}`;
Â  }

Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  document.querySelector('.neumorphic-divider').style.display = 'none';
Â  });
</script>
</body>
</html>
